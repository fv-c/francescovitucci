document.addEventListener("DOMContentLoaded",function(){const e=(new Date).toISOString().split("T")[0],t=document.querySelector(".upcoming-events"),n=document.querySelector(".concluded-events");t.querySelector(".loading-message").style.display="block",n.querySelector(".loading-message").style.display="block",fetch("../assets/events.json").then(e=>e.json()).then(a=>{t.querySelector(".loading-message").remove(),n.querySelector(".loading-message").remove();let l=null;a.filter(t=>t.date>=e).sort((e,t)=>new Date(e.date)-new Date(t.date)).forEach(e=>{const n=new Date(e.date).getFullYear();if(n!==l){const e=document.createElement("h2");e.className="year-divider",e.textContent=n,t.appendChild(e),l=n}const a=document.createElement("div");a.className=`upcoming-event ${"cancelled"===e.status?"cancelled":""}`,a.innerHTML=`\n                        <div class="event-info-wrapper">\n                            <div class="event-info">\n                                <p class="date-event">${new Date(e.date).getDate()} ${["JAN.","FEB.","MAR.","APR.","MAY.","JUNE","JULY","AUG.","SEPT.","OCT.","NOV.","DEC."][new Date(e.date).getMonth()]}</p>\n                                ${e.time?`<p class="time-event">${e.time}</p>`:""}\n                                ${e.location?`<p class="place-event">${e.location}</p>`:""}\n                                ${e.type?`<p class="type-event">${e.type}</p>`:""}\n                            </div>\n                        </div>\n                        <div class="event-content">\n                            <h2>${e.title}</h2>\n                            ${e.description?`<p>${e.description}</p>`:""}\n                            ${e.url?`<a href="${e.url}" target="_blank">Read more</a>`:""}\n                            ${"cancelled"===e.status?'<div class="event-cancelled-mark">Cancelled</div>':""}\n                        </div>\n                    `,t.appendChild(a),t.appendChild(document.createElement("hr")).style.width="75%"}),l=null,a.filter(t=>t.date<e).sort((e,t)=>new Date(t.date)-new Date(e.date)).forEach(e=>{const t=new Date(e.date).getFullYear();if(t!==l){const e=document.createElement("h2");e.className="year-divider",e.textContent=t,n.appendChild(e),l=t}const a=document.createElement("div");a.className="concluded-event",a.innerHTML=`\n                        <div class="event-info-wrapper">\n                            <div class="event-info">\n                                <p class="date-event">${new Date(e.date).getDate()} ${["JAN.","FEB.","MAR.","APR.","MAY.","JUNE","JULY","AUG.","SEPT.","OCT.","NOV.","DEC."][new Date(e.date).getMonth()]}</p>\n                                ${e.time?`<p class="time-event">${e.time}</p>`:""}\n                                ${e.location?`<p class="place-event">${e.location}</p>`:""}\n                                ${e.type?`<p class="type-event">${e.type}</p>`:""}\n                            </div>\n                        </div>\n                        <div class="event-content">\n                            <h2>${e.title}</h2>\n                            ${e.description?`<p>${e.description}</p>`:""}\n                            ${e.url?`<a href="${e.url}" target="_blank">Read more</a>`:""}\n                        </div>\n                    `,n.appendChild(a),n.appendChild(document.createElement("hr")).style.width="75%"})})["catch"](e=>{console.error("Error fetching events:",e),t.innerHTML="<p class='no-events'>No upcoming events available.</p>",n.innerHTML="<p class='no-events'>No recent events available.</p>"})});